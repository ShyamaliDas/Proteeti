{% extends "base.html" %}
{% block content %}
<div class="container" style="max-width: 900px; margin-top: 20px;">
  <h1>Edit Profile</h1>
  <form method="POST">
    <div class="mb-3"><label>Full name</label><input type="text" name="full_name" class="form-control" value="{{ user.profile.full_name or '' }}"></div>
    <div class="mb-3"><label>Mobile phone</label><input type="text" name="phone" class="form-control" value="{{ user.profile.phone or '' }}"></div>
    <div class="mb-3"><label>Country</label><input type="text" name="country" class="form-control" value="{{ user.profile.country or '' }}"></div>
    <div class="mb-3"><label>City</label><input type="text" name="city" class="form-control" value="{{ user.profile.city or '' }}"></div>
    <div class="mb-3"><label>Language</label><input type="text" name="language" class="form-control" value="{{ user.profile.language or '' }}"></div>
    <div class="mb-3"><label>Timezone</label><input type="text" name="timezone" class="form-control" value="{{ user.profile.timezone or '' }}"></div>
    <div class="mb-3 form-check"><input type="checkbox" class="form-check-input" name="location_permission" id="locPerm" {% if user.profile.location_permission %}checked{% endif %}> <label class="form-check-label" for="locPerm">Allow using device location for SOS</label></div>
    <div class="mb-3"><label>Comms consent</label><select class="form-select" name="comms_consent"><option value="Transactional only" {% if user.profile.comms_consent=="Transactional only" %}selected{% endif %}>Transactional only</option><option value="Promotional ok" {% if user.profile.comms_consent=="Promotional ok" %}selected{% endif %}>Promotional ok</option></select></div>
    <hr>
    <div class="mb-3"><label>Secondary phone (optional)</label><input type="text" name="secondary_phone" class="form-control" value="{{ user.profile.secondary_phone or '' }}"></div>
    <div class="mb-3"><label>Home area</label><input type="text" name="home_area" class="form-control" value="{{ user.profile.home_area or '' }}"></div>
    <div class="mb-3"><label>Medical notes (optional, encrypted)</label><textarea name="medical_notes" class="form-control">{{ user.profile.medical_notes or '' }}</textarea></div>
    <div class="mb-3"><label>Emergency instructions</label><input type="text" name="emergency_instructions" class="form-control" value="{{ user.profile.emergency_instructions or '' }}"></div>
    <hr>
    <div class="mb-3"><label>Avatar/photo</label><input type="text" name="avatar" class="form-control" value="{{ user.profile.avatar or '' }}"></div>
    <div class="mb-3"><label>Gender</label><input type="text" name="gender" class="form-control" value="{{ user.profile.gender or '' }}"></div>
    <div class="mb-3"><label>Date of birth</label><input type="date" name="dob" class="form-control" value="{{ user.profile.dob or '' }}"></div>
    <div class="mb-3"><label>Device push token</label><input type="text" name="push_token" class="form-control" value="{{ user.profile.push_token or '' }}"></div>
    <div class="mt-4">
      <a href="{{ url_for('account') }}" class="btn btn-secondary">Cancel</a>
      <button type="submit" class="btn btn-success">Save &amp; Update</button>
    </div>
  </form>
</div>
{% endblock %}
